<center>
<div id='tool'></div>
<BR><BR><br>
<input type="file" id="inp"><BR><BR>
<canvas id="canvas" ></canvas>
<script>

function kli(){
document.getElementById('a').click();

}

  var img=new Image();

var imgd=new Image();
imgd.onerror=document.getElementById('tool').innerHTML="No Default Archive Found!. Browse to open other Places";
imgd.onload=function(){
  img = new Image();
img.src=imgd.src;

document.getElementById('tool').innerHTML="<a id='a'><img src='standard.img.png' onclick='kli()' style='width:512px;height:512px'><br>Click on standard.img.png or Select other image.</a>";
 

}
imgd.src="standard.img.png";

document.getElementById('inp').onchange = function(e) {
  img = new Image();
  img.onload = draw;
  img.onerror = failed;
  img.src = URL.createObjectURL(this.files[0]);
};

var doa=false;
function draw() {

	if(img.width==0){


  img = new Image();
  img.onload = function(){


  var canvas = document.getElementById('canvas');
  canvas.width = img.width;
  canvas.height = img.height;
  var ctx = canvas.getContext('2d');
  ctx.drawImage(img, 0,0);



base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
		var pixelssas = ctx.getImageData(0, 0, img.width, img.height);
str="";
for(t=0;t<(img.width*img.height);t++){
	offset=4*t;
	r=pixelssas.data[offset];
	g=pixelssas.data[(offset+1)];
	b=pixelssas.data[(offset+2)];
		
	if(r==g && g==b){
		rr=Math.round(r/4);
		str=str+base64.charAt(rr);	
doa=true;
	}



}
document.getElementById('a').setAttribute('href', 'data:text/html;base64,'+str);
document.getElementById('a').setAttribute('download', 'HMidi-Ani_zw93.html');
canvas.style.display="none";
//console.log(str);
//alert("Step Completed! See your Downloads");


};
  img.onerror = failed;
  img.src = "standard.img.png";

}
else{
  var canvas = document.getElementById('canvas');
  canvas.width = img.width;
  canvas.height = img.height;
  var ctx = canvas.getContext('2d');
  ctx.drawImage(img, 0,0);



base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
		var pixelssas = ctx.getImageData(0, 0, img.width, img.height);
str="";
for(t=0;t<(img.width*img.height);t++){
	offset=4*t;
	r=pixelssas.data[offset];
	g=pixelssas.data[(offset+1)];
	b=pixelssas.data[(offset+2)];
		
	if(r==g && g==b){
		rr=Math.round(r/4);
		str=str+base64.charAt(rr);	
doa=true;
	}



}
document.getElementById('a').setAttribute('href', 'data:text/html;base64,'+str);
document.getElementById('a').setAttribute('download', 'HMidi-Ani_zw93.html');
document.getElementById('a').click();
console.log(str);
alert("Step Completed! See your Downloads");
}
}
function failed() {
  console.error("The provided file couldn't be loaded as an Image media");
}
draw();
</script>
<a id='a'></a>
